(this["webpackJsonptt-app"]=this["webpackJsonptt-app"]||[]).push([[0],{141:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),c=n(17),s=n.n(c),o=n(58),j=n.n(o),l=n(81),u=n(82),d=n(53),b=n(104),p=n(114),O=n(189),h=n(172),m=n(181),x=n(182),f=n(186),g=n(176),v=n(175),y=n(177),w=n(178),C=n(188),L=n(179),T=n(180),k=n(183),F=n(184),S=n(185),A=n(59),I=n(112),N=n.n(I),P=n(113),R=n.n(P),$=n(52),q=n(9),D=new $.ApolloClient({uri:"https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",cache:new $.InMemoryCache}),G=Object($.gql)(r||(r=Object(b.a)(["\n  query Route($fromLat: Float!, $fromLon: Float!) {\n    plan(\n      from: {lat: $fromLat, lon: $fromLon}\n      to: {lat: 60.16736926540844, lon: 24.921782530681504}\n      numItineraries: 3\n    ) {\n      itineraries {\n        startTime\n        endTime\n        duration\n        walkDistance\n        legs {\n          startTime\n          endTime\n          mode\n          duration\n          realTime\n          distance\n          transitLeg\n          from {\n            lat\n            lon\n            name\n            stop {\n              code\n              name\n            }\n          }\n          to {\n            lat\n            lon\n            name\n            stop {\n              code\n              name\n            }\n          }\n          trip {\n            tripHeadsign\n            routeShortName\n          }\n        }\n      }\n    }\n  }"]))),M=i.a.forwardRef((function(e,t){var n=Object(a.useState)("light"),r=Object(d.a)(n,2),c=r[0],s=r[1],o=Object(p.a)({palette:{type:c}});o=Object(O.a)(o);var b=Object(h.a)((function(e){var t;return{root:{flexGrow:1},title:{flexGrow:1,textAlign:"center"},mainContent:(t={},Object(u.a)(t,e.breakpoints.up("sm"),{width:"75%",margin:"0 auto",padding:"30px"}),Object(u.a)(t,"textAlign","center"),t)}}))(),I=Object(a.useState)(""),P=Object(d.a)(I,2),M=P[0],z=P[1],B=Object(a.useState)(!1),E=Object(d.a)(B,2),H=E[0],J=E[1],Q=Object(a.useState)(null),K=Object(d.a)(Q,2),U=K[0],V=K[1];function W(){var e=Object($.useLazyQuery)(G),t=Object(d.a)(e,2),n=t[0],r=t[1],a=r.loading,c=r.error,s=r.data;if(a)return Object(q.jsx)("p",{children:"Loading..."});if(c)return Object(q.jsx)("p",{children:"Error :("});function o(){return(o=Object(l.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:t=e.sent,r=t.features[0].geometry.coordinates,n({variables:{fromLat:r[1],fromLon:r[0]}});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(q.jsxs)("div",{children:[Object(q.jsx)(f.a,{autoFocus:!0,margin:"dense",type:"string",id:"form-name",label:"Starting address",value:M,onChange:function(e){return z(e.target.value)},inputProps:{maxLength:100}}),Object(q.jsx)("br",{}),Object(q.jsx)(g.a,{onClick:function(){return function(){return o.apply(this,arguments)}()},children:"Get routes"}),Object(q.jsx)("br",{}),Object(q.jsx)(v.a,{children:s&&s.plan.itineraries.map((function(e,t){return Object(q.jsx)("div",{children:Object(q.jsx)(y.a,{button:!0,onClick:function(t){return function(e,t){V(t),J(!0)}(0,e)},children:Object(q.jsx)(w.a,{primary:"Route "+(t+1),secondary:Object(q.jsxs)(i.a.Fragment,{children:[X(e.startTime),"\xa0 -\xa0",X(e.endTime)]})})})},t)}))})]})}function X(e){var t=new Date(e),n=t.getHours();n<10&&(n="0"+n);var r=t.getMinutes();return r<10&&(r="0"+r),n+":"+r}function Y(){return Object(q.jsxs)(C.a,{onClose:Z,"aria-labelledby":"simple-dialog-title",open:H,children:[Object(q.jsx)(L.a,{id:"simple-dialog-title",children:Object(q.jsx)(A.a,{children:"Route info"})}),Object(q.jsx)(T.a,{children:U?U.legs.map((function(e,t){return Object(q.jsx)("div",{children:Object(q.jsx)(y.a,{children:Object(q.jsx)(w.a,{primary:"Leg "+(t+1),secondary:Object(q.jsxs)(i.a.Fragment,{children:[X(e.startTime),"\xa0 -\xa0",X(e.endTime),Object(q.jsx)("br",{}),e.mode]})})})},t)})):Object(q.jsx)(q.Fragment,{})})]})}var Z=function(){J(!1)};function _(){return ee.apply(this,arguments)}function ee(){return(ee=Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.digitransit.fi/geocoding/v1/search?text="+M+"&size=1");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(q.jsx)($.ApolloProvider,{client:D,children:Object(q.jsxs)(m.a,{theme:o,children:[Object(q.jsx)(x.a,{}),Object(q.jsxs)("div",{className:"App",children:[Object(q.jsx)(k.a,{position:"static",children:Object(q.jsxs)(F.a,{children:[Object(q.jsx)(A.a,{variant:"h4",className:b.title,children:"Timetables App"}),"light"===c?Object(q.jsx)(g.a,{onClick:function(){return s("dark")},children:Object(q.jsx)(N.a,{})}):Object(q.jsx)(g.a,{onClick:function(){return s("light")},children:Object(q.jsx)(R.a,{})})]})}),Object(q.jsx)("main",{children:Object(q.jsx)(S.a,{className:b.mainContent,children:Object(q.jsxs)("div",{children:[Object(q.jsx)(Y,{open:H,onClose:Z}),Object(q.jsx)(W,{})]})})})]})]})})})),z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,191)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};s.a.render(Object(q.jsx)(i.a.StrictMode,{children:Object(q.jsx)(M,{})}),document.getElementById("root")),z()}},[[141,1,2]]]);
//# sourceMappingURL=main.b147ae29.chunk.js.map