(this["webpackJsonptt-app"]=this["webpackJsonptt-app"]||[]).push([[0],{146:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(16),s=n.n(i),c=n(37),o=n(73),d={routes:{},content:{},isOpen:!1,address:""};var u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_DATA":return Object.assign({},t,{routes:e.payload});case"SET_OPEN":return Object.assign({},t,{content:e.payload});case"SET_BOOL":return Object.assign({},t,{isOpen:e.payload});case"SET_ADDRESS":return Object.assign({},t,{address:e.payload});default:return t}},l=Object(o.b)(u),j=n(61),b=n(82),p=n(122),O=n(193),h=n(175),m=n(185),x=n(186),f=n(187),g=n(188),v=n(184),w=n(189),y=n(63),T=n(120),k=n.n(T),S=n(121),A=n.n(S),C=n(46);var L=n(179),D=n(180),E=n(181);function F(t){var e=new Date(t),n=e.getHours();n<10&&(n="0"+n);var r=e.getMinutes();return r<10&&(r="0"+r),n+":"+r}function B(t){return{type:"SET_BOOL",payload:t}}function N(t){return{type:"SET_OPEN",payload:t}}var R=n(8);window.store=l,window.setOpen=N,window.setBool=B;var _=Object(h.a)((function(t){return{title:{flexGrow:1,textAlign:"center"},entry:{borderRadius:"25px",margin:"10px"},customBtn:{marginLeft:"5vh"},buttonDiv:{marginBottom:"2vh"}}}));var P=Object(c.b)((function(t){return{content:t.content,isOpen:t.isOpen,routes:t.routes,address:t.address}}))((function(t){t.content,t.isOpen;var e=t.routes,n=t.address,r=_();return Object(R.jsxs)("div",{children:[Object(R.jsx)(y.a,{variant:"h5",className:r.title,children:""!==n?n+" - Maria 01":Object(R.jsx)(R.Fragment,{})}),Object(R.jsx)("br",{}),Object(R.jsx)(L.a,{children:0!=Object.keys(e).length&&e.plan.itineraries.map((function(t,e){return Object(R.jsx)("div",{children:Object(R.jsx)(D.a,{button:!0,className:r.entry,onClick:function(e){return function(t,e){l.dispatch(N(e)),l.dispatch(B(!0))}(0,t)},children:Object(R.jsx)(E.a,{primary:Object(R.jsx)(a.a.Fragment,{children:Object(R.jsx)(y.a,{variant:"h5",children:"Route - "+(e+1)+" / "+Math.ceil(t.duration/60)+"min"})}),secondary:Object(R.jsx)(a.a.Fragment,{children:Object(R.jsxs)(y.a,{variant:"h5",children:[F(t.startTime),"\xa0 -\xa0",F(t.endTime)]})})})})},e)}))})]})})),M=n(192),G=n(182),H=n(183);window.store=l,window.setOpen=N,window.setBool=B;var I,$=Object(c.b)((function(t){return{content:t.content,isOpen:t.isOpen,routes:t.routes}}))((function(t){var e=t.content,n=t.isOpen,r=(t.routes,Object(h.a)((function(t){return{entry:{borderRadius:"25px",margin:"10px"}}}))());return Object(R.jsxs)(M.a,{onClose:function(){l.dispatch(B(!1))},"aria-labelledby":"simple-dialog-title",open:n,children:[Object(R.jsx)(G.a,{id:"simple-dialog-title",children:Object(R.jsx)(y.a,{variant:"h5",children:"Route info"})}),Object(R.jsx)(H.a,{children:0!=Object.keys(e).length?e.legs.map((function(t,e){return Object(R.jsx)("div",{className:r.entry,children:Object(R.jsx)(D.a,{children:Object(R.jsx)(E.a,{primary:Object(R.jsx)(a.a.Fragment,{children:Object(R.jsx)(y.a,{variant:"h5",children:t.mode+(t.trip?" "+t.trip.routeShortName:"")+" - "+Math.ceil(t.duration/60)+"min"})}),secondary:Object(R.jsx)(a.a.Fragment,{children:Object(R.jsxs)(y.a,{variant:"h5",children:[t.from.stop&&t.to.stop?t.from.stop.name+" - "+t.to.stop.name:t.from.name+" - "+t.to.name,Object(R.jsx)("br",{}),F(t.startTime),"\xa0 -\xa0",F(t.endTime)]})})})})},e)})):Object(R.jsx)(R.Fragment,{})})]})})),q=n(62),z=n.n(q),J=n(89),Q=n(117),K=n(190);function U(t){return{type:"SET_ADDRESS",payload:t}}window.store=l,window.setAddress=U;var V=Object(C.gql)(I||(I=Object(Q.a)(["\n  query Route($fromLat: Float!, $fromLon: Float!) {\n    plan(\n      from: {lat: $fromLat, lon: $fromLon}\n      to: {lat: 60.16736926540844, lon: 24.921782530681504}\n      numItineraries: 5\n    ) {\n      itineraries {\n        startTime\n        endTime\n        duration\n        walkDistance\n        legs {\n          startTime\n          endTime\n          mode\n          duration\n          realTime\n          distance\n          transitLeg\n          from {\n            lat\n            lon\n            name\n            stop {\n              code\n              name\n            }\n          }\n          to {\n            lat\n            lon\n            name\n            stop {\n              code\n              name\n            }\n          }\n          trip {\n            tripHeadsign\n            routeShortName\n          }\n        }\n      }\n    }\n  }"]))),W=Object(h.a)((function(t){return{customBtn:{marginLeft:"5vh"},buttonDiv:{marginBottom:"2vh"}}}));var X=Object(c.b)((function(t){return{address:t.address}}))((function(t){var e=t.address,n=W(),r=Object(C.useLazyQuery)(V,{onCompleted:function(){l.dispatch(setData(s))}}),a=Object(b.a)(r,2),i=a[0],s=a[1].data;function c(){return(c=Object(J.a)(z.a.mark((function t(){var e,n;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:e=t.sent,n=e.features[0].geometry.coordinates,i({variables:{fromLat:n[1],fromLon:n[0]}});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return d.apply(this,arguments)}function d(){return(d=Object(J.a)(z.a.mark((function t(){var n,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.digitransit.fi/geocoding/v1/search?text="+e+"&size=1");case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(R.jsxs)("div",{className:n.buttonDiv,children:[Object(R.jsx)(K.a,{autoFocus:!0,margin:"dense",type:"string",id:"form-name",label:"Starting address",value:e,onChange:function(t){return l.dispatch(U(t.target.value))},inputProps:{maxLength:100}}),Object(R.jsx)(v.a,{className:n.customBtn,variant:"contained",onClick:function(){return function(){return c.apply(this,arguments)}()},children:Object(R.jsx)(y.a,{variant:"h5",children:"Get timetable"})})]})}));window.store=l,window.setData=function(t){return{type:"SET_DATA",payload:t}},window.setOpen=N,window.setBool=B;var Y=new C.ApolloClient({uri:"https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",cache:new C.InMemoryCache}),Z=a.a.forwardRef((function(t,e){var n=Object(r.useState)("light"),a=Object(b.a)(n,2),i=a[0],s=a[1];l.subscribe((function(){return console.log("state",l.getState())}));var c=Object(p.a)({palette:{type:i}});c=Object(O.a)(c);var o=Object(h.a)((function(t){var e;return{root:{flexGrow:1},title:{flexGrow:1,textAlign:"center"},mainContent:(e={},Object(j.a)(e,t.breakpoints.up("sm"),{width:"75%",margin:"0 auto",padding:"30px",borderRadius:"25px",marginTop:"2vh"}),Object(j.a)(e,"textAlign","center"),Object(j.a)(e,"backgroundColor",c.palette.background.paper),Object(j.a)(e,"minHeight","80vh"),e)}}))();return Object(R.jsx)(C.ApolloProvider,{client:Y,children:Object(R.jsxs)(m.a,{theme:c,children:[Object(R.jsx)(x.a,{}),Object(R.jsxs)("div",{className:"App",children:[Object(R.jsx)(f.a,{position:"static",children:Object(R.jsxs)(g.a,{children:[Object(R.jsx)(y.a,{children:"Aleksi Heikkil\xe4, 2021"}),Object(R.jsx)(y.a,{variant:"h4",className:o.title,children:"Timetables App"}),"light"===i?Object(R.jsx)(v.a,{onClick:function(){return s("dark")},children:Object(R.jsx)(k.a,{})}):Object(R.jsx)(v.a,{onClick:function(){return s("light")},children:Object(R.jsx)(A.a,{})})]})}),Object(R.jsx)("main",{children:Object(R.jsx)(w.a,{className:o.mainContent,children:Object(R.jsxs)("div",{children:[Object(R.jsx)(X,{}),Object(R.jsx)($,{}),Object(R.jsx)(P,{})]})})})]})]})})})),tt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,195)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),i(t),s(t)}))};s.a.render(Object(R.jsx)(c.a,{store:l,children:Object(R.jsx)(Z,{})}),document.getElementById("root")),tt()}},[[146,1,2]]]);
//# sourceMappingURL=main.6018f2e4.chunk.js.map