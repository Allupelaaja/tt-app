(this["webpackJsonptt-app"]=this["webpackJsonptt-app"]||[]).push([[0],{146:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(16),s=n.n(i),c=n(37),o=n(73),d={routes:{},content:{},isOpen:!1,address:"",startingAddress:"",isEmpty:!1};var u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_DATA":return Object.assign({},t,{routes:e.payload});case"SET_OPEN":return Object.assign({},t,{content:e.payload});case"SET_BOOL":return Object.assign({},t,{isOpen:e.payload});case"SET_ADDRESS":return Object.assign({},t,{address:e.payload});case"SET_STARTING":return Object.assign({},t,{startingAddress:e.payload});case"SET_EMPTY":return Object.assign({},t,{isEmpty:e.payload});default:return t}},l=Object(o.b)(u),j=n(61),p=n(82),b=n(122),O=n(193),h=n(175),m=n(185),g=n(186),x=n(187),f=n(188),v=n(184),y=n(189),w=n(63),T=n(120),A=n.n(T),E=n(121),S=n.n(E),k=n(46);var C=n(179),L=n(180),D=n(181);function N(t){var e=new Date(t),n=e.getHours();n<10&&(n="0"+n);var r=e.getMinutes();return r<10&&(r="0"+r),n+":"+r}function F(t){return{type:"SET_BOOL",payload:t}}function B(t){return{type:"SET_OPEN",payload:t}}var _=n(8);window.store=l,window.setOpen=B,window.setBool=F;var R=Object(h.a)((function(t){return{title:{flexGrow:1,textAlign:"center"},entry:{borderRadius:"25px",margin:"10px"},customBtn:{marginLeft:"5vh"},buttonDiv:{marginBottom:"2vh"}}}));var P=Object(c.b)((function(t){return{content:t.content,isOpen:t.isOpen,routes:t.routes,address:t.address,startingAddress:t.startingAddress}}))((function(t){t.content,t.isOpen;var e=t.routes,n=(t.address,t.startingAddress),r=R();return Object(_.jsxs)("div",{children:[Object(_.jsx)(w.a,{variant:"h5",className:r.title,children:""!==n?n+" - Maria 01":Object(_.jsx)(_.Fragment,{})}),Object(_.jsx)("br",{}),Object(_.jsx)(C.a,{children:0!=Object.keys(e).length&&e.plan.itineraries.map((function(t,e){return Object(_.jsx)("div",{children:Object(_.jsx)(L.a,{button:!0,className:r.entry,onClick:function(e){return function(t,e){l.dispatch(B(e)),l.dispatch(F(!0))}(0,t)},children:Object(_.jsx)(D.a,{primary:Object(_.jsx)(a.a.Fragment,{children:Object(_.jsx)(w.a,{variant:"h5",children:"Route - "+(e+1)+" / "+Math.ceil(t.duration/60)+"min"})}),secondary:Object(_.jsx)(a.a.Fragment,{children:Object(_.jsxs)(w.a,{variant:"h5",children:[N(t.startTime),"\xa0 -\xa0",N(t.endTime)]})})})})},e)}))})]})})),M=n(192),G=n(182),I=n(183);window.store=l,window.setOpen=B,window.setBool=F;var H,$=Object(c.b)((function(t){return{content:t.content,isOpen:t.isOpen,routes:t.routes}}))((function(t){var e=t.content,n=t.isOpen,r=(t.routes,Object(h.a)((function(t){return{entry:{borderRadius:"25px",margin:"10px"}}}))());return Object(_.jsxs)(M.a,{onClose:function(){l.dispatch(F(!1))},"aria-labelledby":"simple-dialog-title",open:n,children:[Object(_.jsx)(G.a,{id:"simple-dialog-title",children:Object(_.jsx)(w.a,{variant:"h5",children:"Route info"})}),Object(_.jsx)(I.a,{children:0!=Object.keys(e).length?e.legs.map((function(t,e){return Object(_.jsx)("div",{className:r.entry,children:Object(_.jsx)(L.a,{children:Object(_.jsx)(D.a,{primary:Object(_.jsx)(a.a.Fragment,{children:Object(_.jsx)(w.a,{variant:"h5",children:t.mode+(t.trip?" "+t.trip.routeShortName:"")+" - "+Math.ceil(t.duration/60)+"min"})}),secondary:Object(_.jsx)(a.a.Fragment,{children:Object(_.jsxs)(w.a,{variant:"h5",children:[t.from.stop&&t.to.stop?t.from.stop.name+" - "+t.to.stop.name:t.from.name+" - "+t.to.name,Object(_.jsx)("br",{}),N(t.startTime),"\xa0 -\xa0",N(t.endTime)]})})})})},e)})):Object(_.jsx)(_.Fragment,{})})]})})),q=n(62),z=n.n(q),J=n(89),Y=n(117),Q=n(190);function K(t){return{type:"SET_ADDRESS",payload:t}}function U(t){return{type:"SET_STARTING",payload:t}}function V(t){return{type:"SET_EMPTY",payload:t}}window.store=l,window.setAddress=K,window.setStarting=U,window.setEmpty=V;var W=Object(k.gql)(H||(H=Object(Y.a)(["\n  query Route($fromLat: Float!, $fromLon: Float!) {\n    plan(\n      from: {lat: $fromLat, lon: $fromLon}\n      to: {lat: 60.16736926540844, lon: 24.921782530681504}\n      numItineraries: 5\n    ) {\n      itineraries {\n        startTime\n        endTime\n        duration\n        walkDistance\n        legs {\n          startTime\n          endTime\n          mode\n          duration\n          realTime\n          distance\n          transitLeg\n          from {\n            lat\n            lon\n            name\n            stop {\n              code\n              name\n            }\n          }\n          to {\n            lat\n            lon\n            name\n            stop {\n              code\n              name\n            }\n          }\n          trip {\n            tripHeadsign\n            routeShortName\n          }\n        }\n      }\n    }\n  }"]))),X=Object(h.a)((function(t){return{customBtn:{marginLeft:"5vh"},buttonDiv:{marginBottom:"2vh"}}}));var Z=Object(c.b)((function(t){return{address:t.address,startingAddress:t.startingAddress,isEmpty:t.isEmpty}}))((function(t){var e=t.address,n=(t.startingAddress,t.isEmpty),r=X(),a=Object(k.useLazyQuery)(W,{onCompleted:function(){l.dispatch(setData(c))}}),i=Object(p.a)(a,2),s=i[0],c=i[1].data;function o(){return(o=Object(J.a)(z.a.mark((function t(){var n,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=9;break}return t.next=3,d();case 3:n=t.sent,r=n.features[0].geometry.coordinates,s({variables:{fromLat:r[1],fromLon:r[0]}}),l.dispatch(U(e)),t.next=10;break;case 9:l.dispatch(V(!0));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return u.apply(this,arguments)}function u(){return(u=Object(J.a)(z.a.mark((function t(){var n,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.digitransit.fi/geocoding/v1/search?text="+e+"&size=1");case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(_.jsxs)("div",{className:r.buttonDiv,children:[Object(_.jsx)(Q.a,{error:n,autoFocus:!0,margin:"dense",type:"string",id:"form-name",label:"Starting address",value:e,onChange:function(t){return function(t){l.dispatch(V(!1)),l.dispatch(K(t))}(t.target.value)},inputProps:{maxLength:100}}),Object(_.jsx)(v.a,{className:r.customBtn,variant:"contained",onClick:function(){return function(){return o.apply(this,arguments)}()},children:Object(_.jsx)(w.a,{variant:"h5",children:"Get timetable"})})]})}));window.store=l,window.setData=function(t){return{type:"SET_DATA",payload:t}},window.setOpen=B,window.setBool=F;var tt=new k.ApolloClient({uri:"https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",cache:new k.InMemoryCache}),et=a.a.forwardRef((function(t,e){var n=Object(r.useState)("light"),a=Object(p.a)(n,2),i=a[0],s=a[1],c=Object(b.a)({palette:{type:i}});c=Object(O.a)(c);var o=Object(h.a)((function(t){var e;return{root:{flexGrow:1},title:{flexGrow:1,textAlign:"center"},mainContent:(e={},Object(j.a)(e,t.breakpoints.up("sm"),{width:"75%",margin:"0 auto",padding:"30px",borderRadius:"25px",marginTop:"2vh"}),Object(j.a)(e,"textAlign","center"),Object(j.a)(e,"backgroundColor",c.palette.background.paper),Object(j.a)(e,"minHeight","80vh"),e)}}))();return Object(_.jsx)(k.ApolloProvider,{client:tt,children:Object(_.jsxs)(m.a,{theme:c,children:[Object(_.jsx)(g.a,{}),Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)(x.a,{position:"static",children:Object(_.jsxs)(f.a,{children:[Object(_.jsx)(w.a,{children:"Aleksi Heikkil\xe4, 2021"}),Object(_.jsx)(w.a,{variant:"h4",className:o.title,children:"Timetables App"}),"light"===i?Object(_.jsx)(v.a,{onClick:function(){return s("dark")},children:Object(_.jsx)(A.a,{})}):Object(_.jsx)(v.a,{onClick:function(){return s("light")},children:Object(_.jsx)(S.a,{})})]})}),Object(_.jsx)("main",{children:Object(_.jsx)(y.a,{className:o.mainContent,children:Object(_.jsxs)("div",{children:[Object(_.jsx)(Z,{}),Object(_.jsx)($,{}),Object(_.jsx)(P,{})]})})})]})]})})})),nt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,195)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),i(t),s(t)}))};s.a.render(Object(_.jsx)(c.a,{store:l,children:Object(_.jsx)(et,{})}),document.getElementById("root")),nt()}},[[146,1,2]]]);
//# sourceMappingURL=main.1012208d.chunk.js.map