(this["webpackJsonptt-app"]=this["webpackJsonptt-app"]||[]).push([[0],{141:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),c=n(17),s=n.n(c),o=n(58),j=n.n(o),l=n(81),u=n(82),b=n(45),d=n(104),p=n(114),m=n(189),O=n(172),h=n(181),x=n(182),f=n(186),g=n(176),v=n(175),y=n(177),C=n(178),w=n(188),L=n(179),T=n(180),k=n(183),F=n(184),S=n(185),A=n(59),N=n(112),M=n.n(N),I=n(113),P=n.n(I),R=n(53),$=n(8),q=new R.ApolloClient({uri:"https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",cache:new R.InMemoryCache}),D=Object(R.gql)(r||(r=Object(d.a)(["\n  query Route($fromLat: Float!, $fromLon: Float!) {\n    plan(\n      from: {lat: $fromLat, lon: $fromLon}\n      to: {lat: 60.16736926540844, lon: 24.921782530681504}\n      numItineraries: 5\n    ) {\n      itineraries {\n        startTime\n        endTime\n        duration\n        walkDistance\n        legs {\n          startTime\n          endTime\n          mode\n          duration\n          realTime\n          distance\n          transitLeg\n          from {\n            lat\n            lon\n            name\n            stop {\n              code\n              name\n            }\n          }\n          to {\n            lat\n            lon\n            name\n            stop {\n              code\n              name\n            }\n          }\n          trip {\n            tripHeadsign\n            routeShortName\n          }\n        }\n      }\n    }\n  }"]))),G=i.a.forwardRef((function(e,t){var n=Object(a.useState)("light"),r=Object(b.a)(n,2),c=r[0],s=r[1],o=Object(p.a)({palette:{type:c}});o=Object(m.a)(o);var d=Object(O.a)((function(e){var t;return{root:{flexGrow:1},title:{flexGrow:1,textAlign:"center"},mainContent:(t={},Object(u.a)(t,e.breakpoints.up("sm"),{width:"75%",margin:"0 auto",padding:"30px"}),Object(u.a)(t,"textAlign","center"),t)}}))(),N=Object(a.useState)(""),I=Object(b.a)(N,2),G=I[0],z=I[1],B=Object(a.useState)(!1),E=Object(b.a)(B,2),H=E[0],J=E[1],Q=Object(a.useState)(null),K=Object(b.a)(Q,2),U=K[0],V=K[1],W=Object(a.useState)(""),X=Object(b.a)(W,2),Y=X[0],Z=X[1];function _(){var e=Object(R.useLazyQuery)(D,{onCompleted:function(){Z(s)}}),t=Object(b.a)(e,2),n=t[0],r=t[1],a=r.loading,c=r.error,s=r.data;if(a)return Object($.jsx)("p",{children:"Loading..."});if(c)return Object($.jsx)("p",{children:"Error :("});function o(){return(o=Object(l.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:t=e.sent,r=t.features[0].geometry.coordinates,n({variables:{fromLat:r[1],fromLon:r[0]}});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object($.jsxs)("div",{children:[Object($.jsx)(f.a,{autoFocus:!0,margin:"dense",type:"string",id:"form-name",label:"Starting address",value:G,onChange:function(e){return z(e.target.value)},inputProps:{maxLength:100}}),Object($.jsx)("br",{}),Object($.jsx)(g.a,{onClick:function(){return function(){return o.apply(this,arguments)}()},children:"Get timetable"}),Object($.jsx)("br",{}),Object($.jsx)(A.a,{variant:"h5",className:d.title,children:""!==G?G+" - Maria 01":Object($.jsx)($.Fragment,{})}),Object($.jsx)("br",{}),Object($.jsx)(v.a,{children:Y&&Y.plan.itineraries.map((function(e,t){return Object($.jsx)("div",{children:Object($.jsx)(y.a,{button:!0,onClick:function(t){return function(e,t){V(t),J(!0)}(0,e)},children:Object($.jsx)(C.a,{primary:"Route "+(t+1)+" "+Math.ceil(e.duration/60)+"min",secondary:Object($.jsxs)(i.a.Fragment,{children:[ee(e.startTime),"\xa0 -\xa0",ee(e.endTime)]})})})},t)}))})]})}function ee(e){var t=new Date(e),n=t.getHours();n<10&&(n="0"+n);var r=t.getMinutes();return r<10&&(r="0"+r),n+":"+r}function te(){return Object($.jsxs)(w.a,{onClose:ne,"aria-labelledby":"simple-dialog-title",open:H,children:[Object($.jsx)(L.a,{id:"simple-dialog-title",children:Object($.jsx)(A.a,{children:"Route info"})}),Object($.jsx)(T.a,{children:U?U.legs.map((function(e,t){return Object($.jsx)("div",{children:Object($.jsx)(y.a,{children:Object($.jsx)(C.a,{primary:e.mode+(e.trip?" "+e.trip.routeShortName:""),secondary:Object($.jsxs)(i.a.Fragment,{children:[e.from.stop&&e.to.stop?e.from.stop.name+" - "+e.to.stop.name:e.from.name+" - "+e.to.name,Object($.jsx)("br",{}),ee(e.startTime),"\xa0 -\xa0",ee(e.endTime)]})})})},t)})):Object($.jsx)($.Fragment,{})})]})}var ne=function(){J(!1)};function re(){return ae.apply(this,arguments)}function ae(){return(ae=Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.digitransit.fi/geocoding/v1/search?text="+G+"&size=1");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object($.jsx)(R.ApolloProvider,{client:q,children:Object($.jsxs)(h.a,{theme:o,children:[Object($.jsx)(x.a,{}),Object($.jsxs)("div",{className:"App",children:[Object($.jsx)(k.a,{position:"static",children:Object($.jsxs)(F.a,{children:[Object($.jsx)(A.a,{variant:"h4",className:d.title,children:"Timetables App"}),"light"===c?Object($.jsx)(g.a,{onClick:function(){return s("dark")},children:Object($.jsx)(M.a,{})}):Object($.jsx)(g.a,{onClick:function(){return s("light")},children:Object($.jsx)(P.a,{})})]})}),Object($.jsx)("main",{children:Object($.jsx)(S.a,{className:d.mainContent,children:Object($.jsxs)("div",{children:[Object($.jsx)(te,{open:H,onClose:ne}),Object($.jsx)(_,{})]})})})]})]})})})),z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,191)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};s.a.render(Object($.jsx)(i.a.StrictMode,{children:Object($.jsx)(G,{})}),document.getElementById("root")),z()}},[[141,1,2]]]);
//# sourceMappingURL=main.ac8b25d5.chunk.js.map